<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<div th:replace="~{fragments/head :: head}"></div>
<body>
	<div th:replace="~{fragments/nav :: nav}"></div>

	<section class="container my-4 p-2">

		<div class="container p-2 mb-2">
			<h1 class="text">My Events</h1>
			<p class="text">Keep track of events you joined or created easily</p>			
			<a class="btn text-white rounded-4 p-2" style="background-color: #6f42c1;"
				th:href="@{/events/create}">
				<div class="mx-4">Create Event</div>
			</a>
		</div>

		<!-- Tabs -->
		<ul class="nav nav-tabs mx-2" id="myTab" role="tablist">
			<li class="nav-item" role="presentation">
				<button class="nav-link active" id="created-tab"
					data-bs-toggle="tab" data-bs-target="#created" type="button">
					<i class="bi bi-calendar-plus"></i> Created Events <span
						class="badge ms-1"
						th:text="${#lists.size(createdEvents)}"></span>
				</button>
			</li>
			<li class="nav-item" role="presentation">
				<button class="nav-link" id="joined-tab" data-bs-toggle="tab"
					data-bs-target="#joined" type="button">
					<i class="bi bi-person-check"></i> Joined Events <span
						class="badge ms-1"
						th:text="${#lists.size(joinedEvents)}"></span>
				</button>
			</li>
			<li class="nav-item" role="presentation">
				<button class="nav-link" id="bookmarked-tab" data-bs-toggle="tab"
					data-bs-target="#bookmarked" type="button">
					<i class="bi bi-bookmark"></i> My Bookmark <span
						class="badge ms-1"
						th:text="${#lists.size(bookmarkedEvents)}"></span>
				</button>
			</li>
		</ul>
		<div class="tab-content" id="myTabContent">

			<!-- Created Events -->
			<div class="tab-pane fade show active " id="created" role="tabpanel">
				<div class="mt-4">
					<div th:if="${#lists.isEmpty(createdEvents)}"
						class="alert bg-white border border-light-subtle rounded-4 shadow-sm mb-4 p-4 text-center">
						<i class="bi bi-exclamation-triangle" style="font-size: 3rem;"></i>
						<h4>No events created yet</h4>
						<p>Start organizing events by creating your first event!</p>
						<a th:href="@{/events/create}" 
							class="btn text-white rounded-4 p-2 mt-3" 
							style="background-color: #6f42c1;">
							<div class="mx-4">Create Event</div></a>
					</div>

					<div class="row">
						<div th:each="event : ${createdEvents}"
							class="col-md-6 col-lg-4 mb-4">
							<div class="card h-100">
								<div class="card-body d-flex flex-column">
									<h5 class="card-title" th:text="${event.title}"></h5>
									<p class="card-text"
										th:text="${#strings.abbreviate(event.description, 100)}"></p>

									<div class="mb-2">
										<small class="text-muted"> <i class="bi bi-calendar"></i>
											<span
											th:text="${#temporals.format(event.date, 'MMM dd, yyyy HH:mm')}"></span>
										</small>
									</div>

									<div class="mb-2">
										<small class="text-muted"> <i class="bi bi-people"></i>
											<span
											th:text="${event.currentParticipants} + '/' + ${event.maxParticipants}"></span>
											participants
										</small>
									</div>
									
									<div class="mb-2">
										<small class="text-muted"> <i class="bi bi-person"></i>
											Organized by <span th:text="${event.creator.username}"></span>
										</small>
									</div>

									<div class="d-flex gap-2">
										<a th:href="@{/events/{id}(id=${event.id})}"
										class="btn text-white rounded-4 p-2 mt-3 w-100" 
										style="background-color: #6f42c1;"> 
											<i class="bi bi-eye me-1"></i> View Details
										</a> 
										
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Joined Events -->
			<div class="tab-pane fade" id="joined" role="tabpanel">
				<div class="mt-4">
					<div th:if="${#lists.isEmpty(joinedEvents)}"
						class="alert bg-white border border-light-subtle rounded-4 shadow-sm mb-4 p-4 text-center">
						<i class="bi bi-exclamation-triangle" style="font-size: 3rem;"></i>
						<h4>No events joined yet</h4>
						<p>Explore and join interesting events from the home page!</p>
						<a th:href="@{/}"
							class="btn text-white rounded-4 p-2 mt-3" 
							style="background-color: #6f42c1;">
							<div class="mx-4">Browse Events</div></a>
					</div>

					<div class="row">
						<div th:each="event : ${joinedEvents}"
							class="col-md-6 col-lg-4 mb-4">
							<div class="card h-100">
								<div class="card-body d-flex flex-column">
									<h5 class="card-title" th:text="${event.title}"></h5>
									<p class="card-text"
										th:text="${#strings.abbreviate(event.description, 100)}"></p>

									<div class="mb-2">
										<small class="text-muted"> <i class="bi bi-calendar"></i>
											<span
											th:text="${#temporals.format(event.date, 'MMM dd, yyyy HH:mm')}"></span>
										</small>
									</div>

									<div class="mb-2">
										<small class="text-muted"> <i class="bi bi-people"></i>
											<span
											th:text="${event.currentParticipants} + '/' + ${event.maxParticipants}"></span>
											participants
										</small>
									</div>

									<div class="mb-2">
										<small class="text-muted"> <i class="bi bi-person"></i>
											Organized by <span th:text="${event.creator.username}"></span>
										</small>
									</div>

									<div class="d-flex gap-2">
										<a th:href="@{/events/{id}(id=${event.id})}"
										class="btn text-white rounded-4 p-2 mt-3 w-100" 
										style="background-color: #6f42c1;"> 
											<i class="bi bi-eye me-1"></i> View Details
										</a> 
										
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Bookmarked Events -->
			<div class="tab-pane fade" id="bookmarked" role="tabpanel">
				<div class="mt-4">
					<div th:if="${#lists.isEmpty(bookmarkedEvents)}"
						class="alert bg-white border border-light-subtle rounded-4 shadow-sm mb-4 p-4 text-center">
						<i class="bi bi-exclamation-triangle" style="font-size: 3rem;"></i>
						<h4>No bookmarked events</h4>
						<p>Bookmark events you're interested in to keep track of them!</p>
						<a th:href="@{/}"
							class="btn text-white rounded-4 p-2 mt-3" 
							style="background-color: #6f42c1;">
							<div class="mx-4">Browse Events</div></a>
					</div>

					<div class="row">
						<div th:each="event : ${bookmarkedEvents}"
							class="col-md-6 col-lg-4 mb-4">
							<div class="card h-100">
								<div class="card-body d-flex flex-column">
									<h5 class="card-title" th:text="${event.title}"></h5>
									<p class="card-text"
										th:text="${#strings.abbreviate(event.description, 100)}"></p>

									<div class="mb-2">
										<small class="text-muted"> <i class="bi bi-calendar"></i>
											<span
											th:text="${#temporals.format(event.date, 'MMM dd, yyyy HH:mm')}"></span>
										</small>
									</div>

									<div class="mb-2">
										<small class="text-muted"> <i class="bi bi-people"></i>
											<span
											th:text="${event.currentParticipants} + '/' + ${event.maxParticipants}"></span>
											participants
										</small>
									</div>

									<div class="mb-2">
										<small class="text-muted"> <i class="bi bi-person"></i>
											Organized by <span th:text="${event.creator.username}"></span>
										</small>
									</div>

									<div class="d-flex gap-2">
										<a th:href="@{/events/{id}(id=${event.id})}"
										class="btn text-white rounded-4 p-2 mt-3 w-100" 
										style="background-color: #6f42c1;"> 
											<i class="bi bi-eye me-1"></i> View Details
										</a> 
										
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- 
		<section class="container my-4">
			<div class="d-flex gap-3">
				<div class="col">
					<div class="card my-card h-100 position-relative"
						th:classappend="${view == 'joined'} ? 'active' : ''">
						<div
							class="card-body d-flex flex-row align-items-center justify-content-center p-2">
							<i class="bi bi-calendar-event" style="font-size: 1.5rem;"></i>
							<h5 class="card-title mb-0 ms-2">Joined Events</h5>
						</div>
						<a class="stretched-link" th:href="@{/myevent(view='joined')}"></a>
					</div>
				</div>
				<div class="col">
					<div class="card my-card h-100 position-relative"
						th:classappend="${view == 'created'} ? 'active' : ''">
						<div
							class="card-body d-flex flex-row align-items-center justify-content-center p-2">
							<i class="bi bi-clipboard2-plus" style="font-size: 1.5rem;"></i>
							<h5 class="card-title mb-0 ms-2">Created Events</h5>
						</div>
						<a class="stretched-link" th:href="@{/myevent(view='created')}"></a>
					</div>
				</div>
				<div class="col">
					<div class="card my-card h-100 position-relative"
						th:classappend="${view == 'created'} ? 'active' : ''">
						<div
							class="card-body d-flex flex-row align-items-center justify-content-center p-2">
							<i class="bi bi-clipboard2-plus" style="font-size: 1.5rem;"></i>
							<h5 class="card-title mb-0 ms-2">Bookmarked Events</h5>
						</div>
						<a class="stretched-link" th:href="@{/myevent(view='created')}"></a>
					</div>
				</div>
				<div class="d-flex gap-3 me-3 ms-auto mb-2 mb-lg-0">
					<a class="text-decoration-none text-dark nav-card"
						th:href="@{/myevent/create}">
						<div
							class="card my-card rounded-circle p-2 px-3 d-flex flex-row align-items-center">
							<i class="bi bi-plus-lg" style="font-size: 1.5rem;"></i>
						</div>
					</a>
				</div>
			</div>
		</section>
 -->
		<style>
.my-card {
	border: 1px solid #dee2e6;
	border-radius: 15px;
}

.my-card:hover {
	transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s
		ease;
	box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
	background-color: #F0E9FF;
	color: #921ffa;
}

.my-card.active {
	box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
	color: #921ffa;
}
</style>
	</section>

	<!-- <div th:replace="~{fragments/show :: show(${showTitle})}"></div> -->

	<div th:replace="~{fragments/footer :: footer}"></div>

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>